<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Little Prince Gravity Adventure</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="game-container">
        <h1>Little Prince Gravity Adventure</h1>
        <div id="game-info">
            <div id="score">Score: 0</div>
            <div id="lives">Lives: 3</div>
            <div id="level">Level: 1</div>
            <div id="timer">Time: 0:00.0</div>
            <div id="high-score">High Score: 0</div>
            <div id="game-buttons">
                <button id="fullscreen-btn" class="game-btn" title="Toggle Fullscreen">⛶</button>
                <button id="menu-btn" class="game-btn" title="Menu">☰</button>
            </div>
        </div>
        <canvas id="game-canvas" width="800" height="600"></canvas>
        <div id="game-status"></div>
    </div>

    <!-- Main Menu -->
    <div id="main-menu" class="menu-overlay">
        <div class="menu-panel">
            <h2 class="menu-title">Little Prince</h2>
            <p class="menu-subtitle">jUMP eVERY wORLD</p>
            <div class="menu-buttons">
                <button class="menu-btn primary" onclick="showModeSelect()">Play</button>
                <button class="menu-btn" onclick="showStats()">Statistics</button>
                <button class="menu-btn" onclick="showSettings()">Settings</button>
                <button class="menu-btn" onclick="showHowToPlay()">How to Play</button>
            </div>
            <div class="menu-footer">
                <p>High Score: <span id="menu-high-score">0</span></p>
            </div>
        </div>
    </div>

    <!-- Mode Selection -->
    <div id="mode-select" class="menu-overlay hidden">
        <div class="menu-panel">
            <h2 class="menu-title">Select Mode</h2>
            <div class="mode-grid">
                <div class="mode-card" onclick="selectMode('endless')">
                    <h3>Endless</h3>
                    <p>3 lives, climb the leaderboard</p>
                    <p class="mode-record">Best: <span id="endless-record">0</span></p>
                </div>
                <div class="mode-card" onclick="showSpeedrunSelect()">
                    <h3>Speedrun</h3>
                    <p>Infinite lives, race the clock</p>
                    <p class="mode-record">Choose: 10 / 25 / 100 levels</p>
                </div>
                <div class="mode-card" onclick="selectMode('daily')">
                    <h3>Daily Challenge</h3>
                    <p>Today's levels, 3 lives</p>
                    <p class="mode-record">Best: <span id="daily-record">0</span></p>
                </div>
                <div class="mode-card" onclick="showPracticeSelect()">
                    <h3>Practice</h3>
                    <p>Infinite lives, any level</p>
                    <p class="mode-record">Choose starting level</p>
                </div>
            </div>
            <button class="menu-btn secondary" onclick="showMainMenu()">Back</button>
        </div>
    </div>

    <!-- Speedrun Target Selection -->
    <div id="speedrun-select" class="menu-overlay hidden">
        <div class="menu-panel">
            <h2 class="menu-title">Speedrun</h2>
            <div class="menu-buttons">
                <button class="menu-btn primary" onclick="selectMode('speedrun', 10)">10 Levels</button>
                <button class="menu-btn primary" onclick="selectMode('speedrun', 25)">25 Levels</button>
                <button class="menu-btn primary" onclick="selectMode('speedrun', 100)">100 Levels</button>
            </div>
            <div class="speedrun-records">
                <h3>Your Records</h3>
                <p>10 Levels: <span id="speedrun-10-time">--:--</span> (<span id="speedrun-10-deaths">0</span> deaths)</p>
                <p>25 Levels: <span id="speedrun-25-time">--:--</span> (<span id="speedrun-25-deaths">0</span> deaths)</p>
                <p>100 Levels: <span id="speedrun-100-time">--:--</span> (<span id="speedrun-100-deaths">0</span> deaths)</p>
            </div>
            <button class="menu-btn secondary" onclick="showModeSelect()">Back</button>
        </div>
    </div>

    <!-- Practice Level Selection -->
    <div id="practice-select" class="menu-overlay hidden">
        <div class="menu-panel">
            <h2 class="menu-title">Choose Starting Level</h2>
            <div class="practice-selection">
                <div class="level-input">
                    <label for="level-input">Level Number:</label>
                    <input type="number" id="level-input" min="1" max="999" value="1" class="level-textbox">
                </div>
                <div class="level-presets">
                    <button class="preset-btn" onclick="setLevel(1)">Level 1</button>
                    <button class="preset-btn" onclick="setLevel(5)">Level 5</button>
                    <button class="preset-btn" onclick="setLevel(10)">Level 10</button>
                    <button class="preset-btn" onclick="setLevel(15)">Level 15</button>
                    <button class="preset-btn" onclick="setLevel(25)">Level 25</button>
                    <button class="preset-btn" onclick="setLevel(50)">Level 50</button>
                </div>
                <div class="menu-buttons">
                    <button class="menu-btn primary" onclick="startPracticeMode()">Start Practice</button>
                </div>
            </div>
            <button class="menu-btn secondary" onclick="showModeSelect()">Back</button>
        </div>
    </div>

    <!-- Pause Menu -->
    <div id="pause-menu" class="menu-overlay hidden">
        <div class="menu-panel">
            <h2 class="menu-title">Paused</h2>
            <div class="menu-buttons">
                <button class="menu-btn primary" onclick="resumeGame()">Resume</button>
                <button class="menu-btn" onclick="restartLevel()">Restart Level</button>
                <button class="menu-btn" onclick="showSettings()">Settings</button>
                <button class="menu-btn secondary" onclick="quitToMenu()">Quit to Menu</button>
            </div>
        </div>
    </div>

    <!-- Completion Screen -->
    <div id="completion-screen" class="menu-overlay hidden">
        <div class="menu-panel">
            <h2 class="menu-title" id="completion-title">Complete!</h2>
            <div class="completion-stats">
                <p>Levels Completed: <span id="final-levels">0</span></p>
                <p>Time: <span id="final-time">0:00.0</span></p>
                <p>Deaths: <span id="final-deaths">0</span></p>
                <p class="completion-score">Score: <span id="final-score">0</span></p>
            </div>
            <div class="menu-buttons">
                <button class="menu-btn primary" onclick="playAgain()">Play Again</button>
                <button class="menu-btn" onclick="showMainMenu()">Main Menu</button>
            </div>
        </div>
    </div>

    <!-- Statistics -->
    <div id="stats-screen" class="menu-overlay hidden">
        <div class="menu-panel wide">
            <h2 class="menu-title">Statistics</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <p class="stat-value" id="stat-levels">0</p>
                    <p class="stat-label">Levels Completed</p>
                </div>
                <div class="stat-card">
                    <p class="stat-value" id="stat-deaths">0</p>
                    <p class="stat-label">Total Deaths</p>
                </div>
                <div class="stat-card">
                    <p class="stat-value" id="stat-jumps">0</p>
                    <p class="stat-label">Total Jumps</p>
                </div>
                <div class="stat-card">
                    <p class="stat-value" id="stat-landings">0</p>
                    <p class="stat-label">Total Landings</p>
                </div>
                <div class="stat-card">
                    <p class="stat-value" id="stat-streak">0</p>
                    <p class="stat-label">Longest Streak</p>
                </div>
                <div class="stat-card">
                    <p class="stat-value" id="stat-time">0h 0m</p>
                    <p class="stat-label">Time Played</p>
                </div>
            </div>
            <button class="menu-btn secondary" onclick="hideStats()">Back</button>
        </div>
    </div>

    <!-- Settings -->
    <div id="settings-screen" class="menu-overlay hidden">
        <div class="menu-panel">
            <h2 class="menu-title">Settings</h2>
            <div class="settings-content">
                <div class="setting-row">
                    <label for="speed-slider">Game Speed: <span id="speed-value">1.0x</span></label>
                    <input type="range" id="speed-slider" min="0.3" max="2.5" step="0.1" value="1.0">
                </div>
                <div class="setting-row">
                    <label for="gravity-slider">Gravity: <span id="gravity-value">2.0x</span></label>
                    <input type="range" id="gravity-slider" min="0.5" max="5.0" step="0.1" value="2.0">
                </div>
                <div class="setting-row">
                    <label>
                        <input type="checkbox" id="effects-toggle" checked> Visual Effects
                    </label>
                </div>
            </div>
            <button class="menu-btn secondary" onclick="hideSettings()">Back</button>
        </div>
    </div>

    <!-- How to Play -->
    <div id="howto-screen" class="menu-overlay hidden">
        <div class="menu-panel wide">
            <h2 class="menu-title">How to Play</h2>
            <div class="howto-content">
                <div class="howto-section">
                    <h3>Controls</h3>
                    <p>← → Arrow Keys: Move along planet surface</p>
                    <p>Hold both ← →: Slow down to stop</p>
                    <p>Release all keys: Jump from planet</p>
                    <p>Touch/Click & Drag: Full-screen joystick (anywhere on screen)</p>
                    <p>Works in both portrait and landscape modes</p>
                    <p>R: Restart current level</p>
                    <p>ESC: Pause</p>
                </div>
                <div class="howto-section">
                    <h3>Mechanics</h3>
                    <p>Run around planets to build speed. Jump to launch into space!</p>
                    <p>2 rotations = Escape velocity (70.7% max speed)</p>
                    <p>4 rotations = Maximum speed</p>
                    <p>Use gravity to navigate between planets</p>
                </div>
                <div class="howto-section">
                    <h3>Obstacles</h3>
                    <p>Red squares: Lose a life on touch</p>
                    <p>Black holes (level 51+): Instant death, massive gravity</p>
                    <p>Avoid collisions while reaching the green goal!</p>
                </div>
            </div>
            <button class="menu-btn secondary" onclick="hideHowToPlay()">Back</button>
        </div>
    </div>

    <!-- Joystick Overlay -->
    <div id="joystick-overlay" style="display: none;">
        <canvas id="joystick-canvas" width="200" height="200"></canvas>
    </div>

    <script src="constants.js"></script>
    <script src="game-classes.js"></script>
    <script src="game-main.js"></script>
    <script src="ui.js"></script>
    <script src="init.js"></script>
</body>
</html>
